# EEBot 功能開發議程 (Feature Backlog)

## 📋 待開發功能清單

---

## 🟡 中優先級功能

### B 方案: 智能推薦整合學習統計

**提案日期**: 2025-12-14
**狀態**: 📋 規劃中 (Backlog)
**預估工時**: 2-3 小時

#### 功能描述

在「智能推薦」(i) 功能中整合學習統計,實現智能判斷:
- 執行前檢查學習進度
- 如果已 100% 完成,自動跳過執行
- 如果有未完成課程,顯示統計並繼續執行

#### 使用場景

```
使用者執行智能推薦 (i)
  ↓
自動檢查學習統計
  ↓
┌────────────────────────────┐
│ 進度 100%?                 │
├────────────────────────────┤
│ Yes → 顯示訊息並跳過        │
│ No  → 顯示統計並繼續執行    │
└────────────────────────────┘
```

#### 預期輸出

**情況 1: 已全部完成**
```
正在檢查學習進度...

📊 學習履歷統計:
  學習進度: 100.0%
  完成課程: 18/18
  進行中課程: 0

✅ 恭喜！所有課程已完成，無需執行智能推薦。

按 Enter 返回主選單...
```

**情況 2: 有未完成課程**
```
正在檢查學習進度...

📊 學習履歷統計:
  學習進度: 88.9%
  完成課程: 16/18
  進行中課程: 2

🔄 發現 2 個未完成課程，開始智能推薦流程...

[繼續原有的智能推薦邏輯]
```

#### 技術實作

**修改檔案**: `menu.py`

**修改函數**: `handle_intelligent_recommendation()`

**實作步驟**:

1. 在函數開頭調用學習統計 API
2. 計算完成率
3. 根據完成率決定流程:
   - 100% → 顯示訊息並返回
   - < 100% → 顯示統計並繼續

**程式碼草稿**:
```python
def handle_intelligent_recommendation(self):
    """智能推薦 - 一鍵自動執行 (整合學習統計)"""

    # 步驟 1: 檢查學習統計
    print('\n正在檢查學習進度...\n')

    try:
        # 調用 my-courses API 獲取統計
        stats = self._get_learning_stats()  # 內部輔助函數

        if stats and stats['success']:
            # 顯示統計
            print('📊 學習履歷統計:')
            print(f"  學習進度: {stats['progress']:.1f}%")
            print(f"  完成課程: {stats['completed']}/{stats['total']}")
            print(f"  進行中課程: {stats['in_progress']}")
            print()

            # 判斷是否需要執行
            if stats['progress'] >= 100.0:
                print('✅ 恭喜！所有課程已完成，無需執行智能推薦。\n')
                input('按 Enter 返回主選單...')
                return  # 提前返回

            # 未完成，繼續執行
            print(f"🔄 發現 {stats['in_progress']} 個未完成課程，開始智能推薦流程...\n")

    except:
        # 如果獲取統計失敗，繼續執行 (靜默失敗)
        pass

    # 步驟 2: 原有的智能推薦邏輯
    # [保持不變]
    ...
```

#### 優點

1. ✅ **節省時間**: 避免已完成時重複執行
2. ✅ **使用者友善**: 清楚顯示當前進度
3. ✅ **向後兼容**: 如果 API 失敗仍會繼續執行
4. ✅ **智能判斷**: 自動化程度更高

#### 風險評估

| 風險 | 機率 | 影響 | 緩解措施 |
|------|------|------|---------|
| API 調用失敗 | 低 | 低 | 靜默失敗,繼續原流程 |
| Session 過期 | 中 | 低 | 提示用戶,繼續原流程 |
| 統計數據不準 | 低 | 中 | 僅供參考,仍執行掃描 |

#### 相關議題

- 關聯功能: A 方案 (選單啟動摘要) ✅ 已完成
- 關聯功能: C 方案 (快速查詢) ✅ 已完成
- 前置需求: API 統計功能 ✅ 已驗證可行

#### 開發排程

**建議時程**: 可隨時開始 (技術已就緒)

**開發流程**:
1. 創建 `_get_learning_stats()` 輔助函數 (30 分鐘)
2. 修改 `handle_intelligent_recommendation()` (1 小時)
3. 測試兩種情況 (已完成 vs 未完成) (30 分鐘)
4. 文檔更新 (30 分鐘)

**驗收標準**:
- [ ] 100% 完成時能正確跳過
- [ ] 未完成時能正確顯示統計並繼續
- [ ] API 失敗時能優雅降級
- [ ] 不影響原有功能

---

## 📝 議程管理

### 如何使用此文檔

1. **提案新功能**: 在對應優先級區塊下新增章節
2. **更新狀態**: 修改狀態標記 (📋 規劃中 → 🚧 開發中 → ✅ 已完成)
3. **記錄決策**: 在功能章節中記錄技術決策與討論
4. **追蹤進度**: 使用驗收標準追蹤開發進度

### 優先級定義

- 🔴 **高優先級**: 核心功能,影響主要使用流程
- 🟡 **中優先級**: 改進功能,提升使用體驗
- 🟢 **低優先級**: 錦上添花,可延後開發

---

**文檔建立**: 2025-12-14
**維護者**: wizard03 with Claude Code (Sonnet 4.5)
**專案**: EEBot (Gleipnir)
