# EEBot å°ˆæ¡ˆæ¶æ§‹èˆ‡ä»£ç¢¼è³ªé‡åˆ†æå ±å‘Š

**å ±å‘Šæ—¥æœŸ**: 2025-12-18
**å°ˆæ¡ˆç‰ˆæœ¬**: v2.3.2+
**åˆ†æè€…**: Claude Code (AI Assistant)

---

## ç›®éŒ„
1. [å°ˆæ¡ˆæ¦‚è¿°](#å°ˆæ¡ˆæ¦‚è¿°)
2. [æ¶æ§‹åˆ†æ](#æ¶æ§‹åˆ†æ)
3. [æ¨¡çµ„åŠŸèƒ½èªªæ˜](#æ¨¡çµ„åŠŸèƒ½èªªæ˜)
4. [åŸ·è¡Œæµç¨‹åˆ†æ](#åŸ·è¡Œæµç¨‹åˆ†æ)
5. [ä»£ç¢¼è³ªé‡è©•ä¼°](#ä»£ç¢¼è³ªé‡è©•ä¼°)
6. [é‡æ§‹å»ºè­°](#é‡æ§‹å»ºè­°)
7. [å„ªåŒ–æ©Ÿæœƒ](#å„ªåŒ–æ©Ÿæœƒ)
8. [PEP 8 åˆè¦æ€§](#pep-8-åˆè¦æ€§)
9. [æŠ€è¡“å‚µå‹™æ¸…å–®](#æŠ€è¡“å‚µå‹™æ¸…å–®)

---

## å°ˆæ¡ˆæ¦‚è¿°

### å°ˆæ¡ˆè³‡è¨Š
- **åç¨±**: EEBot (Elearn Automation Bot) - Gleipnir
- **ç”¨é€”**: å°ç£éƒµæ”¿ e-Learning ç³»çµ±è‡ªå‹•åŒ–å·¥å…·
- **ä¸»è¦èªè¨€**: Python 3.x
- **æ ¸å¿ƒæŠ€è¡“**: Selenium WebDriver, MitmProxy, Requests
- **è¨­è¨ˆæ¨¡å¼**: Page Object Model (POM)

### æ ¸å¿ƒåŠŸèƒ½
1. **è‡ªå‹•ç™»å…¥**: Cookie ç®¡ç† + Stealth æ¨¡å¼
2. **èª²ç¨‹å­¸ç¿’**: è‡ªå‹•ç€è¦½èª²ç¨‹å…§å®¹
3. **æ™‚é•·ç™¼é€**: ä¿®æ”¹ä¸¦ç™¼é€å­¸ç¿’æ™‚é•·
4. **è€ƒè©¦ä½œç­”**: è‡ªå‹•ç­”é¡Œï¼ˆåŸºæ–¼é¡Œåº«ï¼‰
5. **æ‰¹é‡æ“ä½œ**: ä¸€æ¬¡è™•ç†å¤šå€‹èª²ç¨‹
6. **æ··åˆæ¨¡å¼**: API + Web æ··åˆæƒæ

---

## æ¶æ§‹åˆ†æ

### 1. æ•´é«”æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Entry Points                          â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   main.py   â”‚  â”‚  menu.py    â”‚  â”‚  eebot.py   â”‚         â”‚
â”‚  â”‚  (èˆŠå…¥å£)    â”‚  â”‚ (æ–°ä¸»é¸å–®)  â”‚  â”‚  (Legacy)   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Core Layer (æ ¸å¿ƒå±¤)                       â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ ConfigLoader    â”‚  â”‚ DriverManager    â”‚                  â”‚
â”‚  â”‚ (é…ç½®ç®¡ç†)       â”‚  â”‚ (WebDriver ç®¡ç†) â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ CookieManager   â”‚  â”‚ ProxyManager     â”‚                  â”‚
â”‚  â”‚ (Cookie ç®¡ç†)   â”‚  â”‚ (MitmProxy ç®¡ç†) â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Pages Layer (é é¢å±¤)   â”‚  â”‚   API Layer (API å±¤)      â”‚
â”‚                         â”‚  â”‚                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ BasePage            â”‚ â”‚  â”‚ â”‚ visit_duration_api   â”‚ â”‚
â”‚ â”‚ (åŸºç¤é é¢)           â”‚ â”‚  â”‚ â”‚ (æ™‚é•· API)           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚              â”‚  â”‚                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â–¼      â–¼      â–¼       â”‚  â”‚ â”‚ Interceptors         â”‚ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”   â”‚  â”‚ â”‚ - visit_duration     â”‚ â”‚
â”‚ â”‚Loginâ”‚â”‚Courseâ”‚â”‚Exam â”‚   â”‚  â”‚ â”‚ - payload_capture    â”‚ â”‚
â”‚ â”‚Page â”‚â”‚List â”‚â”‚Page â”‚   â”‚  â”‚ â”‚ - manual_send        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜   â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Scenarios Layer (å ´æ™¯å±¤)                        â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ course_learning  â”‚  â”‚ exam_auto_answer â”‚                â”‚
â”‚  â”‚ (èª²ç¨‹å­¸ç¿’)        â”‚  â”‚ (è€ƒè©¦ä½œç­”)       â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ hybrid_duration_send                 â”‚                   â”‚
â”‚  â”‚ (æ··åˆå¼æ™‚é•·ç™¼é€)                      â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Services Layer (æœå‹™å±¤)                         â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ QuestionBank     â”‚  â”‚ AnswerMatcher    â”‚                â”‚
â”‚  â”‚ (é¡Œåº«ç®¡ç†)        â”‚  â”‚ (ç­”æ¡ˆåŒ¹é…)       â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ CourseRecommender (èª²ç¨‹æ¨è–¦)            â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Utils Layer (å·¥å…·å±¤)                           â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ StealthExtractor â”‚  â”‚ TimeTracker      â”‚                â”‚
â”‚  â”‚ (åæª¢æ¸¬ JS)       â”‚  â”‚ (æ™‚é–“è¿½è¹¤)       â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ ScreenshotUtils, CourseSelectionMenu   â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. é—œéµè¨­è¨ˆæ±ºç­–

#### âœ… å„ªç§€è¨­è¨ˆ
1. **Page Object Model**: é é¢é‚è¼¯èˆ‡æ¸¬è©¦é‚è¼¯åˆ†é›¢
2. **Interceptor æ¨¡å¼**: ä½¿ç”¨ MitmProxy æ””æˆªå™¨è™•ç†è«‹æ±‚
3. **é…ç½®ç®¡ç†**: é›†ä¸­å¼é…ç½®æ–‡ä»¶ç®¡ç†
4. **Cookie æŒä¹…åŒ–**: æ¸›å°‘é‡è¤‡ç™»å…¥

#### âš ï¸ éœ€è¦æ”¹é€²
1. **menu.py éå¤§**: 2700+ è¡Œï¼ŒåŒ…å«æ‰€æœ‰æ¥­å‹™é‚è¼¯
2. **ä»£ç¢¼é‡è¤‡**: å¤šå€‹æ¨¡å¼æœ‰ç›¸ä¼¼çš„é‚è¼¯
3. **ç¼ºå°‘æŠ½è±¡å±¤**: ç›´æ¥åœ¨å…¥å£æ–‡ä»¶å¯¦ç¾æ¥­å‹™é‚è¼¯
4. **æ¸¬è©¦è¦†è“‹ä¸è¶³**: ç¼ºå°‘å–®å…ƒæ¸¬è©¦å’Œé›†æˆæ¸¬è©¦

---

## æ¨¡çµ„åŠŸèƒ½èªªæ˜

### Core æ¨¡çµ„ (æ ¸å¿ƒå±¤)

#### 1. ConfigLoader (`src/core/config_loader.py`)
**åŠŸèƒ½**: åŠ è¼‰å’Œç®¡ç†é…ç½®æ–‡ä»¶

**é—œéµæ–¹æ³•**:
```python
load() -> None                    # åŠ è¼‰é…ç½®
get(key: str) -> Any             # ç²å–é…ç½®å€¼
```

**ä½¿ç”¨ç¤ºä¾‹**:
```python
config = ConfigLoader("config/eebot.cfg")
config.load()
username = config.get('user_name')
```

**å„ªé»**: âœ… é›†ä¸­ç®¡ç†é…ç½®
**ç¼ºé»**: âš ï¸ ç¼ºå°‘é…ç½®é©—è­‰å’Œé»˜èªå€¼è™•ç†

---

#### 2. DriverManager (`src/core/driver_manager.py`)
**åŠŸèƒ½**: ç®¡ç† Selenium WebDriver ç”Ÿå‘½é€±æœŸ

**é—œéµæ–¹æ³•**:
```python
create_driver(use_proxy: bool = False) -> WebDriver
```

**ç‰¹æ€§**:
- Stealth æ¨¡å¼æ”¯æŒ
- Proxy é…ç½®
- è‡ªå‹•ä¸‹è¼‰ ChromeDriver

**å„ªé»**: âœ… å°è£ WebDriver åˆå§‹åŒ–é‚è¼¯
**ç¼ºé»**: âš ï¸ èˆ‡ ProxyManager è€¦åˆåº¦é«˜

---

#### 3. ProxyManager (`src/core/proxy_manager.py`)
**åŠŸèƒ½**: ç®¡ç† MitmProxy é€²ç¨‹

**é—œéµæ–¹æ³•**:
```python
start() -> None                   # å•Ÿå‹• Proxy
stop() -> None                    # åœæ­¢ Proxy
get_proxy_url() -> str            # ç²å– Proxy URL
```

**ç‰¹æ€§**:
- æ”¯æŒå¤šå€‹ Interceptor
- å‹•æ…‹ç«¯å£åˆ†é…
- é€²ç¨‹ç®¡ç†

**å„ªé»**: âœ… éˆæ´»çš„æ””æˆªå™¨æ¶æ§‹
**ç¼ºé»**: âš ï¸ Windows ä¸Šç«¯å£é‡‹æ”¾å•é¡Œ

---

#### 4. CookieManager (`src/core/cookie_manager.py`)
**åŠŸèƒ½**: Cookie æŒä¹…åŒ–ç®¡ç†

**é—œéµæ–¹æ³•**:
```python
save_cookies(cookies: List[dict]) -> None
load_cookies() -> List[dict]
clear_cookies() -> None
```

**å„ªé»**: âœ… æ¸›å°‘é‡è¤‡ç™»å…¥
**ç¼ºé»**: âš ï¸ ç¼ºå°‘ Cookie éæœŸæª¢æŸ¥

---

### Pages æ¨¡çµ„ (é é¢å±¤)

#### 1. BasePage (`src/pages/base_page.py`)
**åŠŸèƒ½**: æ‰€æœ‰é é¢å°è±¡çš„åŸºé¡

**é—œéµæ–¹æ³•**:
```python
find_element(locator)             # æŸ¥æ‰¾å…ƒç´ 
click(locator)                    # é»æ“Šå…ƒç´ 
send_keys(locator, text)          # è¼¸å…¥æ–‡å­—
is_element_visible(locator)       # æª¢æŸ¥å…ƒç´ å¯è¦‹æ€§
```

**è¨­è¨ˆæ¨¡å¼**: Template Method Pattern
**å„ªé»**: âœ… çµ±ä¸€çš„å…ƒç´ æ“ä½œæ¥å£
**ç¼ºé»**: âš ï¸ ç¼ºå°‘æ™ºèƒ½ç­‰å¾…ç­–ç•¥

---

#### 2. LoginPage (`src/pages/login_page.py`)
**åŠŸèƒ½**: ç™»å…¥é é¢æ“ä½œ

**é—œéµæ–¹æ³•**:
```python
auto_login(username, password, url) -> bool
manual_login() -> bool
```

**ç‰¹æ€§**:
- Cookie è‡ªå‹•åŠ è¼‰
- é©—è­‰ç¢¼è™•ç†
- ç™»å…¥ç‹€æ…‹æª¢æŸ¥

**å„ªé»**: âœ… æ”¯æŒè‡ªå‹•å’Œæ‰‹å‹•ç™»å…¥
**ç¼ºé»**: âš ï¸ é©—è­‰ç¢¼è­˜åˆ¥ä¸ç©©å®š

---

#### 3. CourseListPage (`src/pages/course_list_page.py`)
**åŠŸèƒ½**: èª²ç¨‹åˆ—è¡¨é é¢æ“ä½œ

**é—œéµæ–¹æ³•**:
```python
goto_my_courses() -> None
get_in_progress_programs() -> List[dict]
get_program_courses_and_exams(program_name) -> dict
```

**å„ªé»**: âœ… å®Œæ•´çš„èª²ç¨‹åˆ—è¡¨æ“ä½œ
**ç¼ºé»**: âš ï¸ æ–¹æ³•åç¨±ä¸ä¸€è‡´ï¼ˆprogram vs courseï¼‰

---

#### 4. CourseDetailPage (`src/pages/course_detail_page.py`)
**åŠŸèƒ½**: èª²ç¨‹è©³æƒ…é é¢æ“ä½œ

**é—œéµæ–¹æ³•**:
```python
select_lesson_by_name(name, delay)
get_first_module_id() -> str
extract_pass_requirement(module_id) -> dict
extract_current_read_time() -> dict
```

**å„ªé»**: âœ… è©³ç´°çš„ä¿¡æ¯æå–æ–¹æ³•
**ç¼ºé»**: âš ï¸ XPath ç¡¬ç·¨ç¢¼ï¼Œæ˜“å—é é¢è®ŠåŒ–å½±éŸ¿

---

### API æ¨¡çµ„ (API å±¤)

#### 1. visit_duration_api (`src/api/visit_duration_api.py`)
**åŠŸèƒ½**: æ™‚é•·ç™¼é€ API å°è£

**é—œéµæ–¹æ³•**:
```python
send_duration(course_id, duration, payload) -> bool
```

**å„ªé»**: âœ… å°è£ HTTP è«‹æ±‚é‚è¼¯
**ç¼ºé»**: âš ï¸ éŒ¯èª¤è™•ç†ä¸å®Œå–„

---

#### 2. Interceptors (`src/api/interceptors/`)

##### visit_duration.py
**åŠŸèƒ½**: æ””æˆªä¸¦ä¿®æ”¹ user-visits è«‹æ±‚

**ç‰¹æ€§**:
- ä¿®æ”¹ `visit_duration` æ¬„ä½
- ä¿®æ”¹ `study_duration` æ¬„ä½
- ä¿æŒå…¶ä»–æ¬„ä½ä¸è®Š

**å„ªé»**: âœ… ç²¾ç¢ºæ§åˆ¶æ™‚é•·
**ç¼ºé»**: âš ï¸ ç¡¬ç·¨ç¢¼æ™‚é•·è¨ˆç®—é‚è¼¯

##### payload_capture.py
**åŠŸèƒ½**: æ•ç²å®Œæ•´çš„ 17 æ¬„ä½ Payload

**ç‰¹æ€§**:
- å„²å­˜åŸå§‹ Payload
- æŒ‰ course_id ç´¢å¼•
- æ”¯æŒæ‰¹é‡æŸ¥è©¢

**å„ªé»**: âœ… å®Œæ•´ä¿ç•™åŸå§‹æ•¸æ“š
**ç¼ºé»**: âš ï¸ å…§å­˜å ç”¨è¼ƒé«˜

##### manual_send_duration.py
**åŠŸèƒ½**: æ‰‹å‹•ç™¼é€æ™‚é•·ï¼ˆä¸æ””æˆªï¼‰

**ä½¿ç”¨å ´æ™¯**: Burp Suite åˆ†ææ¨¡å¼

---

### Scenarios æ¨¡çµ„ (å ´æ™¯å±¤)

#### 1. course_learning (`src/scenarios/course_learning.py`)
**åŠŸèƒ½**: èª²ç¨‹å­¸ç¿’å ´æ™¯

**æµç¨‹**:
1. é¸æ“‡èª²ç¨‹
2. ç€è¦½å­¸ç¿’å…§å®¹
3. è¨˜éŒ„å­¸ç¿’æ™‚é•·

**å„ªé»**: âœ… å®Œæ•´çš„å­¸ç¿’æµç¨‹
**ç¼ºé»**: âš ï¸ èˆ‡ menu.py ä¸­çš„é‚è¼¯é‡è¤‡

---

#### 2. exam_auto_answer (`src/scenarios/exam_auto_answer.py`)
**åŠŸèƒ½**: è€ƒè©¦è‡ªå‹•ä½œç­”

**æµç¨‹**:
1. è®€å–é¡Œç›®
2. åŒ¹é…é¡Œåº«ç­”æ¡ˆ
3. æäº¤ç­”æ¡ˆ

**ä¾è³´**:
- QuestionBank (é¡Œåº«)
- AnswerMatcher (åŒ¹é…å™¨)

**å„ªé»**: âœ… é«˜æ­£ç¢ºç‡
**ç¼ºé»**: âš ï¸ ä¾è³´é¡Œåº«å®Œæ•´æ€§

---

#### 3. hybrid_duration_send (`src/scenarios/hybrid_duration_send.py`)
**åŠŸèƒ½**: æ··åˆå¼æ™‚é•·ç™¼é€ï¼ˆAPI + Webï¼‰

**ç‰¹æ€§**:
- 6 éšæ®µæµç¨‹
- API æƒæç²å– ID
- Web æƒæç²å–è©³æƒ…
- æ‰¹é‡ç™¼é€æ™‚é•·

**å„ªé»**: âœ… é«˜æ•ˆæ‰¹é‡è™•ç†
**ç¼ºé»**: âš ï¸ è¤‡é›œåº¦é«˜ï¼Œé›£ä»¥ç¶­è­·

---

### Services æ¨¡çµ„ (æœå‹™å±¤)

#### 1. QuestionBank (`src/services/question_bank.py`)
**åŠŸèƒ½**: é¡Œåº«ç®¡ç†

**é—œéµæ–¹æ³•**:
```python
load_questions() -> None
search_question(text) -> Question
add_question(question) -> None
```

**è³‡æ–™çµæ§‹**:
```python
{
    "question": "å•é¡Œæ–‡å­—",
    "options": ["A", "B", "C", "D"],
    "answer": "æ­£ç¢ºç­”æ¡ˆ",
    "type": "å–®é¸/å¤šé¸"
}
```

**å„ªé»**: âœ… JSON æ ¼å¼æ˜“æ–¼ç·¨è¼¯
**ç¼ºé»**: âš ï¸ ç¼ºå°‘é‡è¤‡å•é¡Œæª¢æ¸¬

---

#### 2. AnswerMatcher (`src/services/answer_matcher.py`)
**åŠŸèƒ½**: ç­”æ¡ˆæ™ºèƒ½åŒ¹é…

**åŒ¹é…ç­–ç•¥**:
1. å®Œå…¨åŒ¹é…
2. æ¨¡ç³ŠåŒ¹é…ï¼ˆdifflibï¼‰
3. é—œéµè©åŒ¹é…

**å„ªé»**: âœ… å®¹éŒ¯æ€§é«˜
**ç¼ºé»**: âš ï¸ åŒ¹é…é–¾å€¼éœ€è¦èª¿æ•´

---

### Utils æ¨¡çµ„ (å·¥å…·å±¤)

#### 1. StealthExtractor (`src/utils/stealth_extractor.py`)
**åŠŸèƒ½**: æå–åæª¢æ¸¬ JavaScript

**ç‰¹æ€§**:
- å¾ NPM ä¸‹è¼‰ `puppeteer-extra-plugin-stealth`
- æå– `stealth.min.js`
- æ³¨å…¥åˆ° WebDriver

**å„ªé»**: âœ… ç¹éåçˆ¬èŸ²æª¢æ¸¬
**ç¼ºé»**: âš ï¸ ä¾è³´å¤–éƒ¨ NPM åŒ…

---

#### 2. TimeTracker (`src/utils/time_tracker.py`)
**åŠŸèƒ½**: å­¸ç¿’æ™‚é–“è¿½è¹¤

**å„ªé»**: âœ… ç°¡å–®å¯¦ç”¨
**ç¼ºé»**: âš ï¸ åŠŸèƒ½æœ‰é™

---

## åŸ·è¡Œæµç¨‹åˆ†æ

### 1. æ‰¹é‡æ¨¡å¼å®Œæ•´æµç¨‹ (é¸å–®é¸é … 15)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Stage 0: åˆå§‹åŒ–                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 1. æå– Stealth JS                â”‚
        â”‚ 2. åˆå§‹åŒ– CookieManager           â”‚
        â”‚ 3. å•Ÿå‹• MitmProxy (Payload æ¨¡å¼)  â”‚
        â”‚ 4. å‰µå»º WebDriver (with proxy)    â”‚
        â”‚ 5. ç™»å…¥ç³»çµ±                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Stage 1A: API æƒæ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 1. æå– Session Cookie            â”‚
        â”‚ 2. èª¿ç”¨ GET /api/my-courses       â”‚
        â”‚ 3. è§£æ JSON éŸ¿æ‡‰                 â”‚
        â”‚ 4. å„²å­˜ api_courses åˆ—è¡¨          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                  è¼¸å‡º: api_courses = [
                    {id: 465, name: "èª²ç¨‹A"},
                    {id: 452, name: "èª²ç¨‹B"},
                    ...
                  ]
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Stage 1B: Web æƒæ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ For each program:                 â”‚
        â”‚   1. ä½¿ç”¨ get_program_courses_    â”‚
        â”‚      and_exams() ç²å–å­èª²ç¨‹       â”‚
        â”‚   2. åŒ¹é… API Course ID (åç¨±åŒ¹é…)â”‚
        â”‚   3. æå–é€šéæ¢ä»¶ (Module ID)     â”‚
        â”‚   4. é»æ“Šç¬¬ä¸€å€‹å­èª²ç¨‹             â”‚
        â”‚   5. æ•ç² Payload                 â”‚
        â”‚   6. driver.back() x 2            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                  è¼¸å‡º: scanned_courses = [
                    {
                      api_course_id: 465,
                      course_code: "901011114",
                      required_minutes: 100,
                      payload: {...}
                    },
                    ...
                  ]
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Stage 2: èª²ç¨‹é¸æ“‡                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 1. é¡¯ç¤ºæƒæçµæœ                   â”‚
        â”‚ 2. äº’å‹•é¸å–® (all/1-7/s/c)        â”‚
        â”‚ 3. ç”¨æˆ¶ç¢ºèªé¸æ“‡                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                  è¼¸å‡º: selected_courses (ç”¨æˆ¶é¸æ“‡çš„å­é›†)
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Stage 3: æ‰¹é‡ç™¼é€                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ For each selected_course:         â”‚
        â”‚   1. æ§‹å»ºè«‹æ±‚ Payload             â”‚
        â”‚   2. POST /api/user-visits        â”‚
        â”‚   3. æª¢æŸ¥ HTTP ç‹€æ…‹ç¢¼ (2xx=æˆåŠŸ)  â”‚
        â”‚   4. è¨˜éŒ„çµæœ                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                  è¼¸å‡º: send_results = [
                    {status: "success", sent_minutes: 100},
                    ...
                  ]
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Stage 4: é©—è­‰                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ For each successful_course:       â”‚
        â”‚   1. å‰å¾€èª²ç¨‹è©³æƒ…é                â”‚
        â”‚   2. æå–ç•¶å‰å·²é–±è®€æ™‚æ•¸           â”‚
        â”‚   3. æ¯”è¼ƒç™¼é€å‰å¾Œå·®ç•°             â”‚
        â”‚   4. è¨˜éŒ„é©—è­‰çµæœ                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                  è¼¸å‡º: verification_results = [
                    {
                      before: 0,
                      after: 100,
                      change: 100
                    },
                    ...
                  ]
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æœ€çµ‚å ±å‘Š                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        æƒæèª²ç¨‹: 7
        é¸æ“‡èª²ç¨‹: 7
        ç™¼é€æˆåŠŸ: 7
        ç™¼é€å¤±æ•—: 0
        é©—è­‰å®Œæˆ: 7
```

### 2. æ··åˆæƒææ¨¡å¼æµç¨‹ (é¸å–®é¸é … i)

**èˆ‡æ‰¹é‡æ¨¡å¼çš„å·®ç•°**:
| ç‰¹æ€§ | æ‰¹é‡æ¨¡å¼ | æ··åˆæƒææ¨¡å¼ |
|-----|---------|-------------|
| é»æ“Šå­èª²ç¨‹ | âœ… æ˜¯ | âŒ å¦ |
| æ•ç² Payload | âœ… å®Œæ•´ 17 æ¬„ä½ | âŒ ä¸æ•ç² |
| äº’å‹•é¸æ“‡ | âœ… Stage 2 | âŒ è‡ªå‹•è™•ç† |
| ç™¼é€æ–¹å¼ | æ‰¹é‡ API | é€å€‹è¨ªå• |
| è¿”å›æ¬¡æ•¸ | 2 æ¬¡ | 1 æ¬¡ |

---

## ä»£ç¢¼è³ªé‡è©•ä¼°

### 1. Code Smells è­˜åˆ¥

#### ğŸ”´ Critical (åš´é‡)

##### 1.1 God Object - menu.py
**å•é¡Œ**: `menu.py` åŒ…å« 2700+ è¡Œä»£ç¢¼ï¼Œé•åå–®ä¸€è·è²¬åŸå‰‡

**å½±éŸ¿**:
- é›£ä»¥ç¶­è­·
- é›£ä»¥æ¸¬è©¦
- é«˜è€¦åˆåº¦

**ä»£ç¢¼ç¤ºä¾‹**:
```python
# menu.py åŒ…å«æ‰€æœ‰åŠŸèƒ½ï¼š
# - é¸å–®é‚è¼¯
# - ç™»å…¥é‚è¼¯
# - æƒæé‚è¼¯
# - ç™¼é€é‚è¼¯
# - é©—è­‰é‚è¼¯
# - éŒ¯èª¤è™•ç†
# - ç”¨æˆ¶äº¤äº’
```

**é‡æ§‹å»ºè­°**: è¦‹ [é‡æ§‹å»ºè­° #1](#1-æ‹†åˆ†-menupy)

---

##### 1.2 Duplicate Code - API æƒæé‚è¼¯
**å•é¡Œ**: API æƒæé‚è¼¯åœ¨å¤šè™•é‡è¤‡

**ä½ç½®**:
- `menu.py:990-1031` (æ··åˆæƒææ¨¡å¼)
- `menu.py:2285-2343` (æ‰¹é‡æ¨¡å¼)

**ä»£ç¢¼é‡è¤‡**:
```python
# æ··åˆæƒææ¨¡å¼
selenium_cookies = driver.get_cookies()
session_cookie = {cookie['name']: cookie['value'] for cookie in selenium_cookies}
api_url = f"{base_url}/api/my-courses"
response = requests.get(api_url, cookies=session_cookie, ...)
api_courses = data.get('courses', [])

# æ‰¹é‡æ¨¡å¼ - å®Œå…¨ç›¸åŒçš„ä»£ç¢¼
selenium_cookies = driver.get_cookies()
session_cookie = {cookie['name']: cookie['value'] for cookie in selenium_cookies}
api_url = f"{base_url}/api/my-courses"
response = requests.get(api_url, cookies=session_cookie, ...)
api_courses = data.get('courses', [])
```

**é‡æ§‹å»ºè­°**: æå–ç‚º `APIScanner` é¡

---

##### 1.3 Magic Numbers - æ™‚é•·è¨ˆç®—
**å•é¡Œ**: ç¡¬ç·¨ç¢¼çš„æ™‚é•·è¨ˆç®—é‚è¼¯

**ä»£ç¢¼ç¤ºä¾‹**:
```python
# âŒ å£ä»£ç¢¼
need_seconds = (required_minutes * 60) + 10  # 10 æ˜¯ä»€éº¼ï¼Ÿ
time.sleep(7)  # ç‚ºä»€éº¼æ˜¯ 7 ç§’ï¼Ÿ
```

**é‡æ§‹å»ºè­°**:
```python
# âœ… å¥½ä»£ç¢¼
BUFFER_SECONDS = 10  # ç·©è¡æ™‚é–“ï¼Œç¢ºä¿è¶…éæœ€ä½è¦æ±‚
DEFAULT_PAGE_LOAD_DELAY = 7  # ç­‰å¾…é é¢å®Œå…¨åŠ è¼‰

need_seconds = (required_minutes * 60) + BUFFER_SECONDS
time.sleep(DEFAULT_PAGE_LOAD_DELAY)
```

---

#### ğŸŸ¡ Medium (ä¸­ç­‰)

##### 2.1 Long Method - æ‰¹é‡æ¨¡å¼å‡½æ•¸
**å•é¡Œ**: `batch_hybrid_duration_send()` æ–¹æ³• 580+ è¡Œ

**å½±éŸ¿**: é›£ä»¥ç†è§£å’Œç¶­è­·

**é‡æ§‹å»ºè­°**: æ‹†åˆ†ç‚ºå¤šå€‹å­æ–¹æ³•ï¼š
- `initialize_batch_mode()`
- `scan_api_courses()`
- `scan_web_courses()`
- `interactive_course_selection()`
- `batch_send_duration()`
- `verify_duration_changes()`

---

##### 2.2 Primitive Obsession - èª²ç¨‹æ•¸æ“šçµæ§‹
**å•é¡Œ**: ä½¿ç”¨å­—å…¸è€Œéé¡ä¾†è¡¨ç¤ºè¤‡é›œæ•¸æ“š

**ä»£ç¢¼ç¤ºä¾‹**:
```python
# âŒ ç•¶å‰æ–¹å¼
course = {
    'api_course_id': 465,
    'course_code': '901011114',
    'required_minutes': 100,
    'payload': {...}
}
```

**é‡æ§‹å»ºè­°**:
```python
# âœ… æ›´å¥½çš„æ–¹å¼
@dataclass
class ScannedCourse:
    api_course_id: int
    course_code: str
    course_name: str
    required_minutes: int
    payload: dict

    def to_dict(self) -> dict:
        return asdict(self)
```

---

##### 2.3 Shotgun Surgery - HTTP ç‹€æ…‹ç¢¼è™•ç†
**å•é¡Œ**: ç›¸åŒçš„ HTTP ç‹€æ…‹ç¢¼æª¢æŸ¥é‚è¼¯åˆ†æ•£åœ¨å¤šè™•

**ä½ç½®**:
- `menu.py:2637`
- å…¶ä»–ç™¼é€æ™‚é•·çš„åœ°æ–¹

**é‡æ§‹å»ºè­°**: æå–ç‚ºè¼”åŠ©å‡½æ•¸
```python
def is_http_success(status_code: int) -> bool:
    """æª¢æŸ¥ HTTP ç‹€æ…‹ç¢¼æ˜¯å¦è¡¨ç¤ºæˆåŠŸ (2xx)"""
    return 200 <= status_code < 300
```

---

#### ğŸŸ¢ Low (è¼•å¾®)

##### 3.1 Comments - éå¤šæˆ–éå°‘
**å•é¡Œ**:
- æœ‰äº›åœ°æ–¹è¨»é‡‹éå¤šï¼ˆé¡¯è€Œæ˜“è¦‹çš„ä»£ç¢¼ï¼‰
- æœ‰äº›åœ°æ–¹ç¼ºå°‘è¨»é‡‹ï¼ˆè¤‡é›œé‚è¼¯ï¼‰

**ç¤ºä¾‹**:
```python
# âŒ éå¤šè¨»é‡‹
# ç²å–èª²ç¨‹ ID
course_id = course['api_course_id']

# âœ… é©ç•¶è¨»é‡‹
# å¿…é ˆåœ¨é»æ“Šå­èª²ç¨‹ä¹‹å‰æå–é€šéæ¢ä»¶ï¼Œå› ç‚º Module å…ƒç´ åªåœ¨èª²ç¨‹è©³æƒ…é å­˜åœ¨
module_id = detail_page.get_first_module_id()
```

---

##### 3.2 Inconsistent Naming - è®Šæ•¸å‘½åä¸ä¸€è‡´
**å•é¡Œ**: `program` vs `course` æ··ç”¨

**ç¤ºä¾‹**:
```python
# ä¸ä¸€è‡´
programs = get_in_progress_programs()
for program in programs:
    course_id = program['api_course_id']  # program é‚„æ˜¯ courseï¼Ÿ
```

**é‡æ§‹å»ºè­°**: çµ±ä¸€è¡“èª
- `program` â†’ èª²ç¨‹è¨ˆç•«ï¼ˆåŒ…å«å¤šå€‹èª²ç¨‹ï¼‰
- `course` â†’ ä¸»èª²ç¨‹
- `subcourse` / `lesson` â†’ å­èª²ç¨‹

---

### 2. PEP 8 é•è¦

#### ğŸ”´ Critical

##### è¡Œé•·åº¦è¶…é 79 å­—ç¬¦
**ä½ç½®**: å¤šè™•

**ç¤ºä¾‹**:
```python
# âŒ é•è¦ (>79 å­—ç¬¦)
print(f'ã€{i}/{len(programs)}ã€‘æ€§åˆ¥å¹³ç­‰å·¥ä½œæ³•ã€æ€§é¨·æ“¾é˜²æ²»æ³•åŠç›¸é—œå­æ³•ä¿®æ³•é‡é»èˆ‡å¯¦å‹™æ¡ˆä¾‹(114å¹´åº¦)...')

# âœ… ä¿®å¾©
program_name_short = program_name[:60] + '...' if len(program_name) > 60 else program_name
print(f'ã€{i}/{len(programs)}ã€‘{program_name_short}')
```

---

##### ç©ºç™½è¡Œä½¿ç”¨ä¸ç•¶
**å•é¡Œ**: å‡½æ•¸ä¹‹é–“æ‡‰è©²æœ‰å…©å€‹ç©ºç™½è¡Œ

**ç¤ºä¾‹**:
```python
# âŒ é•è¦
def function1():
    pass
def function2():
    pass

# âœ… ä¿®å¾©
def function1():
    pass


def function2():
    pass
```

---

#### ğŸŸ¡ Medium

##### Import é †åºéŒ¯èª¤
**å•é¡Œ**: æ²’æœ‰æŒ‰ç…§ PEP 8 è¦æ±‚æ’åº

**æ­£ç¢ºé †åº**:
1. æ¨™æº–åº«
2. ç¬¬ä¸‰æ–¹åº«
3. æœ¬åœ°æ¨¡çµ„

**ç¤ºä¾‹**:
```python
# âŒ é•è¦
from src.pages.login_page import LoginPage
import time
import requests

# âœ… ä¿®å¾©
import time

import requests

from src.pages.login_page import LoginPage
```

---

##### è®Šæ•¸å‘½åä¸ç¬¦åˆè¦ç¯„
**å•é¡Œ**: éƒ¨åˆ†è®Šæ•¸ä½¿ç”¨ camelCase è€Œé snake_case

**ç¤ºä¾‹**:
```python
# âŒ é•è¦
apiCourses = []
courseId = 465

# âœ… ä¿®å¾©
api_courses = []
course_id = 465
```

---

### 3. æ¶æ§‹å•é¡Œ

#### ç¼ºå°‘æŠ½è±¡å±¤
**å•é¡Œ**: æ¥­å‹™é‚è¼¯ç›´æ¥åœ¨å…¥å£æ–‡ä»¶å¯¦ç¾

**ç•¶å‰çµæ§‹**:
```
menu.py (2700 è¡Œ)
  â”œâ”€ ç™»å…¥é‚è¼¯
  â”œâ”€ æƒæé‚è¼¯
  â”œâ”€ ç™¼é€é‚è¼¯
  â””â”€ é©—è­‰é‚è¼¯
```

**å»ºè­°çµæ§‹**:
```
src/
  â”œâ”€ core/
  â”‚   â””â”€ batch_mode_service.py      # æ‰¹é‡æ¨¡å¼æœå‹™
  â”œâ”€ scanners/
  â”‚   â”œâ”€ api_scanner.py              # API æƒæå™¨
  â”‚   â””â”€ web_scanner.py              # Web æƒæå™¨
  â”œâ”€ senders/
  â”‚   â””â”€ duration_sender.py          # æ™‚é•·ç™¼é€å™¨
  â””â”€ verifiers/
      â””â”€ duration_verifier.py        # æ™‚é•·é©—è­‰å™¨
```

---

## é‡æ§‹å»ºè­°

### 1. æ‹†åˆ† menu.py

#### ç›®æ¨™çµæ§‹

```
src/
  â”œâ”€ cli/
  â”‚   â”œâ”€ __init__.py
  â”‚   â”œâ”€ menu.py                     # ç°¡åŒ–çš„é¸å–® (<300 è¡Œ)
  â”‚   â””â”€ commands/
  â”‚       â”œâ”€ __init__.py
  â”‚       â”œâ”€ login_command.py
  â”‚       â”œâ”€ scan_command.py
  â”‚       â”œâ”€ batch_command.py
  â”‚       â””â”€ hybrid_command.py
  â”œâ”€ services/
  â”‚   â”œâ”€ __init__.py
  â”‚   â”œâ”€ api_scanner.py
  â”‚   â”œâ”€ web_scanner.py
  â”‚   â”œâ”€ duration_sender.py
  â”‚   â””â”€ duration_verifier.py
  â””â”€ models/
      â”œâ”€ __init__.py
      â”œâ”€ scanned_course.py
      â””â”€ send_result.py
```

#### å¯¦ç¾æ­¥é©Ÿ

**Step 1: æå– APIScanner é¡**
```python
# src/services/api_scanner.py
from typing import List, Dict
import requests
from urllib.parse import urlparse


class APIScanner:
    """API æƒæå™¨ - å¾ e-Learning API ç²å–èª²ç¨‹åˆ—è¡¨"""

    def __init__(self, base_url: str):
        self.base_url = base_url

    def scan_my_courses(self, session_cookies: Dict[str, str]) -> List[dict]:
        """
        èª¿ç”¨ /api/my-courses API ç²å–èª²ç¨‹åˆ—è¡¨

        Args:
            session_cookies: Session cookies å­—å…¸

        Returns:
            èª²ç¨‹åˆ—è¡¨

        Raises:
            APIError: API è«‹æ±‚å¤±æ•—
        """
        api_url = f"{self.base_url}/api/my-courses"

        headers = {
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)',
            'Accept': 'application/json, text/plain, */*',
            'Accept-Language': 'zh-TW,zh;q=0.9',
            'Referer': self.base_url,
        }

        import urllib3
        urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)

        response = requests.get(
            api_url,
            cookies=session_cookies,
            headers=headers,
            verify=False,
            timeout=30
        )

        if not is_http_success(response.status_code):
            raise APIError(f'API è«‹æ±‚å¤±æ•—: {response.status_code}')

        data = response.json()
        return data.get('courses', [])
```

**Step 2: æå– WebScanner é¡**
```python
# src/services/web_scanner.py
from typing import List, Optional
from selenium.webdriver.remote.webdriver import WebDriver
from src.pages.course_list_page import CourseListPage
from src.pages.course_detail_page import CourseDetailPage
from src.models.scanned_course import ScannedCourse


class WebScanner:
    """Web æƒæå™¨ - é€šé Selenium æƒæèª²ç¨‹è©³æƒ…"""

    def __init__(self, driver: WebDriver, payload_interceptor):
        self.driver = driver
        self.payload_interceptor = payload_interceptor
        self.course_list_page = CourseListPage(driver)

    def scan_courses(
        self,
        programs: List[dict],
        api_courses: List[dict]
    ) -> List[ScannedCourse]:
        """
        æƒææ‰€æœ‰èª²ç¨‹ä¸¦æ•ç² Payload

        Args:
            programs: Web ç«¯èª²ç¨‹è¨ˆç•«åˆ—è¡¨
            api_courses: API ç«¯èª²ç¨‹åˆ—è¡¨

        Returns:
            æƒæçµæœåˆ—è¡¨
        """
        scanned_courses = []

        for i, program in enumerate(programs, 1):
            program_name = program['name']
            print(f'\\nã€{i}/{len(programs)}ã€‘{program_name[:60]}...')

            try:
                # ç²å–å­èª²ç¨‹åˆ—è¡¨
                details = self.course_list_page.get_program_courses_and_exams(
                    program_name
                )

                if details.get('error'):
                    continue

                courses = details.get('courses', [])
                if not courses:
                    continue

                # åŒ¹é… API Course ID
                api_course_id = self._match_api_course_id(
                    program_name,
                    api_courses
                )

                if not api_course_id:
                    continue

                # æå–é€šéæ¢ä»¶ä¸¦é»æ“Šå­èª²ç¨‹
                scanned_course = self._scan_single_course(
                    program_name,
                    api_course_id,
                    courses[0]
                )

                if scanned_course:
                    scanned_courses.append(scanned_course)

            except Exception as e:
                print(f'  âœ— æƒæå¤±æ•—: {e}')
                continue

            finally:
                # è¿”å›èª²ç¨‹åˆ—è¡¨
                self.driver.back()
                self.driver.back()
                time.sleep(1.5)

        return scanned_courses

    def _match_api_course_id(
        self,
        program_name: str,
        api_courses: List[dict]
    ) -> Optional[int]:
        """åŒ¹é… API Course ID"""
        for api_course in api_courses:
            api_name = api_course.get('name', '')
            if (api_name == program_name or
                api_name in program_name or
                program_name in api_name):
                return api_course.get('id') or api_course.get('course_id')
        return None

    def _scan_single_course(
        self,
        program_name: str,
        api_course_id: int,
        subcourse_info: dict
    ) -> Optional[ScannedCourse]:
        """æƒæå–®å€‹èª²ç¨‹"""
        detail_page = CourseDetailPage(self.driver)

        # æå–é€šéæ¢ä»¶ï¼ˆåœ¨é»æ“Šå­èª²ç¨‹ä¹‹å‰ï¼‰
        required_minutes = None
        try:
            module_id = detail_page.get_first_module_id()
            if module_id:
                requirement = detail_page.extract_pass_requirement(module_id)
                required_minutes = requirement.get('required_minutes')
        except Exception as e:
            print(f'  [WARNING] ç„¡æ³•æå–é€šéæ¢ä»¶: {e}')

        # ç²å–å­èª²ç¨‹åç¨±
        if isinstance(subcourse_info, dict):
            subcourse_name = (subcourse_info.get('name') or
                            subcourse_info.get('title') or
                            str(subcourse_info))
        else:
            subcourse_name = str(subcourse_info)

        # é»æ“Šå­èª²ç¨‹è§¸ç™¼ Payload æ•ç²
        detail_page.select_lesson_by_name(subcourse_name, delay=2.0)
        time.sleep(3)

        # æª¢æŸ¥ Payload
        payload = self.payload_interceptor.get_payload_by_course_id(
            api_course_id
        )

        if not payload:
            return None

        course_code = payload.get('course_code', 'N/A')
        print(f'  âœ“ å·²æ•ç² Payloadï¼ˆèª²ç¨‹ ID: {api_course_id}, '
              f'å­èª²ç¨‹ ID: {course_code}ï¼‰')

        return ScannedCourse(
            api_course_id=api_course_id,
            program_name=program_name,
            course_code=course_code,
            course_name=subcourse_name,
            required_minutes=required_minutes or 0,
            payload=payload
        )
```

**Step 3: å‰µå»ºæ•¸æ“šæ¨¡å‹**
```python
# src/models/scanned_course.py
from dataclasses import dataclass, asdict
from typing import Dict


@dataclass
class ScannedCourse:
    """æƒæçš„èª²ç¨‹æ•¸æ“šæ¨¡å‹"""
    api_course_id: int
    program_name: str
    course_code: str
    course_name: str
    required_minutes: int
    payload: Dict

    def to_dict(self) -> Dict:
        """è½‰æ›ç‚ºå­—å…¸"""
        return asdict(self)

    def __str__(self) -> str:
        return (f'ScannedCourse(id={self.api_course_id}, '
                f'code={self.course_code}, '
                f'minutes={self.required_minutes})')
```

---

### 2. æå–å¸¸é‡

**å‰µå»ºå¸¸é‡æ–‡ä»¶**:
```python
# src/constants.py
"""EEBot å¸¸é‡å®šç¾©"""

# HTTP ç›¸é—œ
HTTP_SUCCESS_MIN = 200
HTTP_SUCCESS_MAX = 300

# æ™‚é•·ç›¸é—œ
BUFFER_SECONDS = 10  # ç™¼é€æ™‚é•·çš„ç·©è¡æ™‚é–“
MINIMUM_DURATION = 60  # æœ€å°å­¸ç¿’æ™‚é•·ï¼ˆç§’ï¼‰

# å»¶é²ç›¸é—œ
DEFAULT_PAGE_LOAD_DELAY = 7  # é é¢åŠ è¼‰ç­‰å¾…æ™‚é–“ï¼ˆç§’ï¼‰
LESSON_SELECT_DELAY = 2  # é¸æ“‡èª²ç¨‹çš„å»¶é²æ™‚é–“ï¼ˆç§’ï¼‰
API_REQUEST_DELAY = 1  # API è«‹æ±‚é–“éš”æ™‚é–“ï¼ˆç§’ï¼‰

# é‡è©¦ç›¸é—œ
MAX_LOGIN_RETRIES = 3  # æœ€å¤§ç™»å…¥é‡è©¦æ¬¡æ•¸
RETRY_DELAY = 5  # é‡è©¦ç­‰å¾…æ™‚é–“ï¼ˆç§’ï¼‰

# æ–‡ä»¶è·¯å¾‘
DEFAULT_CONFIG_PATH = 'config/eebot.cfg'
DEFAULT_COOKIES_PATH = 'resource/cookies/cookies.json'
QUESTION_BANK_PATH = 'resource/question_bank.json'
```

**ä½¿ç”¨å¸¸é‡**:
```python
# âŒ ä¿®æ”¹å‰
if response.status_code == 200:
    ...
time.sleep(7)
need_seconds = (required_minutes * 60) + 10

# âœ… ä¿®æ”¹å¾Œ
from src.constants import (
    HTTP_SUCCESS_MIN, HTTP_SUCCESS_MAX,
    DEFAULT_PAGE_LOAD_DELAY, BUFFER_SECONDS
)

if HTTP_SUCCESS_MIN <= response.status_code < HTTP_SUCCESS_MAX:
    ...
time.sleep(DEFAULT_PAGE_LOAD_DELAY)
need_seconds = (required_minutes * 60) + BUFFER_SECONDS
```

---

### 3. æ”¹å–„éŒ¯èª¤è™•ç†

**ç•¶å‰å•é¡Œ**:
- ä½¿ç”¨é€šç”¨çš„ `Exception`
- éŒ¯èª¤è¨Šæ¯ä¸æ¸…æ™°
- ç¼ºå°‘éŒ¯èª¤æ¢å¾©æ©Ÿåˆ¶

**é‡æ§‹æ–¹æ¡ˆ**:

**Step 1: å‰µå»ºè‡ªå®šç¾©ç•°å¸¸**
```python
# src/exceptions.py
"""EEBot è‡ªå®šç¾©ç•°å¸¸"""


class EEBotError(Exception):
    """EEBot åŸºç¤ç•°å¸¸"""
    pass


class LoginError(EEBotError):
    """ç™»å…¥å¤±æ•—ç•°å¸¸"""
    pass


class ScanError(EEBotError):
    """æƒæå¤±æ•—ç•°å¸¸"""
    pass


class APIError(EEBotError):
    """API è«‹æ±‚å¤±æ•—ç•°å¸¸"""

    def __init__(self, message: str, status_code: int = None):
        super().__init__(message)
        self.status_code = status_code


class PayloadNotFoundError(EEBotError):
    """Payload æœªæ•ç²ç•°å¸¸"""
    pass


class CourseNotFoundError(EEBotError):
    """èª²ç¨‹æœªæ‰¾åˆ°ç•°å¸¸"""

    def __init__(self, course_name: str):
        super().__init__(f'æ‰¾ä¸åˆ°èª²ç¨‹: {course_name}')
        self.course_name = course_name
```

**Step 2: ä½¿ç”¨è‡ªå®šç¾©ç•°å¸¸**
```python
# âŒ ä¿®æ”¹å‰
try:
    response = requests.get(api_url, ...)
    if response.status_code != 200:
        raise Exception(f'API è«‹æ±‚å¤±æ•—: {response.status_code}')
except Exception as e:
    print(f'éŒ¯èª¤: {e}')

# âœ… ä¿®æ”¹å¾Œ
from src.exceptions import APIError

try:
    response = requests.get(api_url, ...)
    if not is_http_success(response.status_code):
        raise APIError(
            f'API è«‹æ±‚å¤±æ•—',
            status_code=response.status_code
        )
except APIError as e:
    print(f'API éŒ¯èª¤ (ç‹€æ…‹ç¢¼: {e.status_code}): {e}')
    # å¯ä»¥æ ¹æ“šç‹€æ…‹ç¢¼æ¡å–ä¸åŒçš„æ¢å¾©ç­–ç•¥
    if e.status_code == 401:
        # é‡æ–°ç™»å…¥
        pass
except EEBotError as e:
    print(f'EEBot éŒ¯èª¤: {e}')
except Exception as e:
    print(f'æœªé æœŸçš„éŒ¯èª¤: {e}')
    import traceback
    traceback.print_exc()
```

---

### 4. æ·»åŠ é¡å‹æç¤º

**ç•¶å‰å•é¡Œ**: å¤§éƒ¨åˆ†å‡½æ•¸ç¼ºå°‘é¡å‹æç¤º

**é‡æ§‹æ–¹æ¡ˆ**:
```python
# âŒ ä¿®æ”¹å‰
def get_program_courses_and_exams(program_name):
    ...
    return {
        'courses': courses,
        'exams': exams
    }

# âœ… ä¿®æ”¹å¾Œ
from typing import Dict, List, Optional, Union

def get_program_courses_and_exams(
    program_name: str
) -> Dict[str, Union[List[dict], bool, str]]:
    """
    ç²å–èª²ç¨‹è¨ˆç•«ä¸‹çš„æ‰€æœ‰å­èª²ç¨‹å’Œæ¸¬é©—

    Args:
        program_name: èª²ç¨‹è¨ˆç•«åç¨±

    Returns:
        åŒ…å«èª²ç¨‹å’Œæ¸¬é©—çš„å­—å…¸:
        {
            'courses': List[dict],  # å­èª²ç¨‹åˆ—è¡¨
            'exams': List[dict],    # æ¸¬é©—åˆ—è¡¨
            'error': bool,          # æ˜¯å¦ç™¼ç”ŸéŒ¯èª¤
            'error_message': str    # éŒ¯èª¤è¨Šæ¯
        }
    """
    ...
    return {
        'courses': courses,
        'exams': exams,
        'error': False,
        'error_message': ''
    }
```

---

### 5. å–®å…ƒæ¸¬è©¦

**å‰µå»ºæ¸¬è©¦çµæ§‹**:
```
tests/
  â”œâ”€ __init__.py
  â”œâ”€ conftest.py                    # Pytest fixtures
  â”œâ”€ unit/
  â”‚   â”œâ”€ test_api_scanner.py
  â”‚   â”œâ”€ test_web_scanner.py
  â”‚   â”œâ”€ test_duration_sender.py
  â”‚   â””â”€ test_utils.py
  â”œâ”€ integration/
  â”‚   â”œâ”€ test_batch_mode.py
  â”‚   â””â”€ test_hybrid_mode.py
  â””â”€ fixtures/
      â”œâ”€ mock_responses.json
      â””â”€ sample_payloads.json
```

**æ¸¬è©¦ç¤ºä¾‹**:
```python
# tests/unit/test_api_scanner.py
import pytest
from src.services.api_scanner import APIScanner
from src.exceptions import APIError


class TestAPIScanner:
    """APIScanner å–®å…ƒæ¸¬è©¦"""

    @pytest.fixture
    def api_scanner(self):
        """å‰µå»º APIScanner å¯¦ä¾‹"""
        return APIScanner('https://example.com')

    @pytest.fixture
    def mock_session_cookies(self):
        """Mock Session Cookies"""
        return {'session_id': 'test123'}

    def test_scan_my_courses_success(
        self,
        api_scanner,
        mock_session_cookies,
        requests_mock
    ):
        """æ¸¬è©¦æˆåŠŸæƒæèª²ç¨‹"""
        # Arrange
        mock_response = {
            'courses': [
                {'id': 465, 'name': 'èª²ç¨‹A'},
                {'id': 452, 'name': 'èª²ç¨‹B'}
            ]
        }
        requests_mock.get(
            'https://example.com/api/my-courses',
            json=mock_response,
            status_code=200
        )

        # Act
        courses = api_scanner.scan_my_courses(mock_session_cookies)

        # Assert
        assert len(courses) == 2
        assert courses[0]['id'] == 465
        assert courses[0]['name'] == 'èª²ç¨‹A'

    def test_scan_my_courses_api_error(
        self,
        api_scanner,
        mock_session_cookies,
        requests_mock
    ):
        """æ¸¬è©¦ API éŒ¯èª¤è™•ç†"""
        # Arrange
        requests_mock.get(
            'https://example.com/api/my-courses',
            status_code=500
        )

        # Act & Assert
        with pytest.raises(APIError) as exc_info:
            api_scanner.scan_my_courses(mock_session_cookies)

        assert exc_info.value.status_code == 500
```

---

## å„ªåŒ–æ©Ÿæœƒ

### 1. æ€§èƒ½å„ªåŒ–

#### 1.1 ä¸¦è¡Œæƒæ
**ç•¶å‰**: ä¸²è¡Œæƒææ¯å€‹èª²ç¨‹
**å„ªåŒ–**: ä½¿ç”¨å¤šç·šç¨‹ä¸¦è¡Œæƒæ

```python
# src/services/parallel_web_scanner.py
from concurrent.futures import ThreadPoolExecutor, as_completed
from typing import List


class ParallelWebScanner(WebScanner):
    """ä¸¦è¡Œ Web æƒæå™¨"""

    def scan_courses_parallel(
        self,
        programs: List[dict],
        api_courses: List[dict],
        max_workers: int = 3
    ) -> List[ScannedCourse]:
        """
        ä¸¦è¡Œæƒæå¤šå€‹èª²ç¨‹

        Args:
            programs: èª²ç¨‹è¨ˆç•«åˆ—è¡¨
            api_courses: API èª²ç¨‹åˆ—è¡¨
            max_workers: æœ€å¤§ä¸¦è¡Œæ•¸

        Returns:
            æƒæçµæœåˆ—è¡¨

        Note:
            å—é™æ–¼ Selenium WebDriver ä¸æ”¯æŒå¤šç·šç¨‹ï¼Œ
            æ­¤å„ªåŒ–åƒ…é©ç”¨æ–¼ API è«‹æ±‚éƒ¨åˆ†
        """
        scanned_courses = []

        with ThreadPoolExecutor(max_workers=max_workers) as executor:
            # æäº¤æ‰€æœ‰ä»»å‹™
            future_to_program = {
                executor.submit(
                    self._scan_single_program,
                    program,
                    api_courses
                ): program
                for program in programs
            }

            # æ”¶é›†çµæœ
            for future in as_completed(future_to_program):
                program = future_to_program[future]
                try:
                    result = future.result()
                    if result:
                        scanned_courses.append(result)
                except Exception as e:
                    print(f'æƒæå¤±æ•— ({program["name"]}): {e}')

        return scanned_courses
```

**æ³¨æ„**: Selenium WebDriver ä¸æ”¯æŒçœŸæ­£çš„å¤šç·šç¨‹ï¼Œæ­¤å„ªåŒ–ä¸»è¦é©ç”¨æ–¼ API è«‹æ±‚éƒ¨åˆ†ã€‚

---

#### 1.2 ç·©å­˜ API éŸ¿æ‡‰
**ç•¶å‰**: æ¯æ¬¡éƒ½é‡æ–°è«‹æ±‚ API
**å„ªåŒ–**: ç·©å­˜çŸ­æœŸæœ‰æ•ˆçš„ API éŸ¿æ‡‰

```python
# src/services/cached_api_scanner.py
from functools import lru_cache
from datetime import datetime, timedelta


class CachedAPIScanner(APIScanner):
    """å¸¶ç·©å­˜çš„ API æƒæå™¨"""

    def __init__(self, base_url: str, cache_ttl: int = 300):
        super().__init__(base_url)
        self.cache_ttl = cache_ttl  # ç·©å­˜æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰
        self._cache = {}
        self._cache_time = {}

    def scan_my_courses(
        self,
        session_cookies: Dict[str, str],
        use_cache: bool = True
    ) -> List[dict]:
        """
        æƒæèª²ç¨‹ï¼ˆæ”¯æŒç·©å­˜ï¼‰

        Args:
            session_cookies: Session cookies
            use_cache: æ˜¯å¦ä½¿ç”¨ç·©å­˜

        Returns:
            èª²ç¨‹åˆ—è¡¨
        """
        cache_key = 'my_courses'

        # æª¢æŸ¥ç·©å­˜
        if use_cache and self._is_cache_valid(cache_key):
            print('[INFO] ä½¿ç”¨ç·©å­˜çš„èª²ç¨‹åˆ—è¡¨')
            return self._cache[cache_key]

        # è«‹æ±‚ API
        courses = super().scan_my_courses(session_cookies)

        # æ›´æ–°ç·©å­˜
        self._cache[cache_key] = courses
        self._cache_time[cache_key] = datetime.now()

        return courses

    def _is_cache_valid(self, key: str) -> bool:
        """æª¢æŸ¥ç·©å­˜æ˜¯å¦æœ‰æ•ˆ"""
        if key not in self._cache:
            return False

        cache_age = (datetime.now() - self._cache_time[key]).total_seconds()
        return cache_age < self.cache_ttl

    def clear_cache(self) -> None:
        """æ¸…é™¤ç·©å­˜"""
        self._cache.clear()
        self._cache_time.clear()
```

---

#### 1.3 æ¸›å°‘ä¸å¿…è¦çš„ç­‰å¾…
**ç•¶å‰**: å›ºå®šå»¶é²ï¼ˆ`time.sleep(7)`ï¼‰
**å„ªåŒ–**: æ™ºèƒ½ç­‰å¾…ï¼ˆWebDriverWaitï¼‰

```python
# src/pages/base_page.py
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC


class BasePage:
    """åŸºç¤é é¢å°è±¡ï¼ˆå„ªåŒ–ç‰ˆï¼‰"""

    def __init__(self, driver, timeout: int = 10):
        self.driver = driver
        self.wait = WebDriverWait(driver, timeout)

    def click_when_ready(self, locator, timeout: int = None):
        """ç­‰å¾…å…ƒç´ å¯é»æ“Šå¾Œé»æ“Š"""
        wait_time = timeout or 10
        element = WebDriverWait(self.driver, wait_time).until(
            EC.element_to_be_clickable(locator)
        )
        element.click()
        return element

    def send_keys_when_ready(self, locator, text, timeout: int = None):
        """ç­‰å¾…å…ƒç´ å¯è¼¸å…¥å¾Œè¼¸å…¥æ–‡å­—"""
        wait_time = timeout or 10
        element = WebDriverWait(self.driver, wait_time).until(
            EC.visibility_of_element_located(locator)
        )
        element.clear()
        element.send_keys(text)
        return element
```

---

### 2. ä»£ç¢¼å¾©ç”¨å„ªåŒ–

#### 2.1 æå–å…¬å…±é‚è¼¯

**æƒ…å¢ƒ**: API Course ID åŒ¹é…é‚è¼¯åœ¨å¤šè™•é‡è¤‡

**å„ªåŒ–æ–¹æ¡ˆ**:
```python
# src/utils/course_matcher.py
from typing import Optional, List


class CourseMatcher:
    """èª²ç¨‹åŒ¹é…å·¥å…·"""

    @staticmethod
    def match_api_course_id(
        program_name: str,
        api_courses: List[dict]
    ) -> Optional[int]:
        """
        æ ¹æ“šåç¨±åŒ¹é… API Course ID

        Args:
            program_name: èª²ç¨‹è¨ˆç•«åç¨±
            api_courses: API èª²ç¨‹åˆ—è¡¨

        Returns:
            åŒ¹é…çš„èª²ç¨‹ IDï¼Œæœªæ‰¾åˆ°å‰‡è¿”å› None

        Matching Strategy:
            1. å®Œå…¨åŒ¹é…: api_name == program_name
            2. å­é›†åŒ¹é…: api_name in program_name
            3. è¶…é›†åŒ¹é…: program_name in api_name
        """
        for api_course in api_courses:
            api_name = api_course.get('name', '')

            if (api_name == program_name or
                api_name in program_name or
                program_name in api_name):
                return api_course.get('id') or api_course.get('course_id')

        return None

    @staticmethod
    def match_similarity(
        name1: str,
        name2: str,
        threshold: float = 0.8
    ) -> bool:
        """
        ä½¿ç”¨ç›¸ä¼¼åº¦åŒ¹é…ï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰

        Args:
            name1: ç¬¬ä¸€å€‹åç¨±
            name2: ç¬¬äºŒå€‹åç¨±
            threshold: ç›¸ä¼¼åº¦é–¾å€¼ (0-1)

        Returns:
            æ˜¯å¦åŒ¹é…
        """
        from difflib import SequenceMatcher

        similarity = SequenceMatcher(None, name1, name2).ratio()
        return similarity >= threshold
```

---

### 3. å¯ç¶­è­·æ€§å„ªåŒ–

#### 3.1 é…ç½®é©—è­‰

**ç•¶å‰**: ç›´æ¥ä½¿ç”¨é…ç½®å€¼ï¼Œæ²’æœ‰é©—è­‰
**å„ªåŒ–**: æ·»åŠ é…ç½®é©—è­‰

```python
# src/core/config_loader.py (å„ªåŒ–ç‰ˆ)
from typing import Any, Dict, Optional
import os


class ConfigLoader:
    """é…ç½®åŠ è¼‰å™¨ï¼ˆå„ªåŒ–ç‰ˆï¼‰"""

    # å¿…éœ€çš„é…ç½®é …
    REQUIRED_KEYS = [
        'user_name',
        'password',
        'target_http',
    ]

    # é…ç½®é …çš„é»˜èªå€¼
    DEFAULTS = {
        'cookies_file': 'resource/cookies/cookies.json',
        'proxy_port': 8899,
        'stealth_enabled': True,
        'max_retries': 3,
    }

    def __init__(self, config_file: str):
        self.config_file = config_file
        self.config: Dict[str, Any] = {}

    def load(self) -> None:
        """åŠ è¼‰é…ç½®æ–‡ä»¶"""
        if not os.path.exists(self.config_file):
            raise FileNotFoundError(f'é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: {self.config_file}')

        # è®€å–é…ç½®ï¼ˆåŸæœ‰é‚è¼¯ï¼‰
        ...

        # é©—è­‰é…ç½®
        self.validate()

        # æ‡‰ç”¨é»˜èªå€¼
        self.apply_defaults()

    def validate(self) -> None:
        """é©—è­‰é…ç½®é …"""
        missing_keys = []

        for key in self.REQUIRED_KEYS:
            if key not in self.config or not self.config[key]:
                missing_keys.append(key)

        if missing_keys:
            raise ValueError(
                f'ç¼ºå°‘å¿…éœ€çš„é…ç½®é …: {", ".join(missing_keys)}'
            )

        # é©—è­‰ç‰¹å®šå€¼
        if 'proxy_port' in self.config:
            port = self.config['proxy_port']
            if not (1024 <= port <= 65535):
                raise ValueError(f'ç„¡æ•ˆçš„ proxy_port: {port}')

    def apply_defaults(self) -> None:
        """æ‡‰ç”¨é»˜èªå€¼"""
        for key, default_value in self.DEFAULTS.items():
            if key not in self.config:
                self.config[key] = default_value

    def get(self, key: str, default: Any = None) -> Any:
        """ç²å–é…ç½®å€¼"""
        return self.config.get(key, default)
```

---

#### 3.2 æ—¥èªŒç³»çµ±

**ç•¶å‰**: ä½¿ç”¨ `print()` è¼¸å‡º
**å„ªåŒ–**: ä½¿ç”¨ Python logging æ¨¡çµ„

```python
# src/utils/logger.py
import logging
import sys
from pathlib import Path


def setup_logger(
    name: str = 'eebot',
    level: int = logging.INFO,
    log_file: str = None
) -> logging.Logger:
    """
    è¨­ç½®æ—¥èªŒç³»çµ±

    Args:
        name: Logger åç¨±
        level: æ—¥èªŒç´šåˆ¥
        log_file: æ—¥èªŒæ–‡ä»¶è·¯å¾‘ï¼ˆå¯é¸ï¼‰

    Returns:
        é…ç½®å¥½çš„ Logger
    """
    logger = logging.getLogger(name)
    logger.setLevel(level)

    # æ ¼å¼åŒ–
    formatter = logging.Formatter(
        '[%(asctime)s] %(levelname)s [%(name)s] %(message)s',
        datefmt='%Y-%m-%d %H:%M:%S'
    )

    # æ§åˆ¶å°è™•ç†å™¨
    console_handler = logging.StreamHandler(sys.stdout)
    console_handler.setLevel(level)
    console_handler.setFormatter(formatter)
    logger.addHandler(console_handler)

    # æ–‡ä»¶è™•ç†å™¨ï¼ˆå¯é¸ï¼‰
    if log_file:
        log_path = Path(log_file)
        log_path.parent.mkdir(parents=True, exist_ok=True)

        file_handler = logging.FileHandler(log_file, encoding='utf-8')
        file_handler.setLevel(level)
        file_handler.setFormatter(formatter)
        logger.addHandler(file_handler)

    return logger


# ä½¿ç”¨ç¤ºä¾‹
logger = setup_logger('eebot', log_file='logs/eebot.log')

# âŒ ä¿®æ”¹å‰
print('[INFO] é–‹å§‹æƒæèª²ç¨‹')
print(f'[ERROR] æƒæå¤±æ•—: {e}')

# âœ… ä¿®æ”¹å¾Œ
logger.info('é–‹å§‹æƒæèª²ç¨‹')
logger.error(f'æƒæå¤±æ•—: {e}', exc_info=True)
```

---

## PEP 8 åˆè¦æ€§

### 1. è‡ªå‹•åŒ–å·¥å…·

#### ä½¿ç”¨ black (ä»£ç¢¼æ ¼å¼åŒ–)
```bash
pip install black
black src/ menu.py --line-length 79
```

#### ä½¿ç”¨ flake8 (ä»£ç¢¼æª¢æŸ¥)
```bash
pip install flake8
flake8 src/ menu.py --max-line-length 79
```

#### ä½¿ç”¨ isort (Import æ’åº)
```bash
pip install isort
isort src/ menu.py --profile black
```

#### ä½¿ç”¨ mypy (é¡å‹æª¢æŸ¥)
```bash
pip install mypy
mypy src/ --ignore-missing-imports
```

---

### 2. Pre-commit Hook

**å‰µå»º .pre-commit-config.yaml**:
```yaml
repos:
  - repo: https://github.com/psf/black
    rev: 23.3.0
    hooks:
      - id: black
        args: [--line-length=79]

  - repo: https://github.com/pycqa/flake8
    rev: 6.0.0
    hooks:
      - id: flake8
        args: [--max-line-length=79]

  - repo: https://github.com/pycqa/isort
    rev: 5.12.0
    hooks:
      - id: isort
        args: [--profile=black]
```

**å®‰è£ pre-commit**:
```bash
pip install pre-commit
pre-commit install
```

---

### 3. PEP 8 å¿«é€Ÿæª¢æŸ¥æ¸…å–®

#### âœ… å‘½åè¦ç¯„
- [ ] æ¨¡çµ„åç¨±: `lowercase_with_underscores.py`
- [ ] é¡åç¨±: `CapWords`
- [ ] å‡½æ•¸/è®Šæ•¸: `lowercase_with_underscores`
- [ ] å¸¸é‡: `UPPERCASE_WITH_UNDERSCORES`
- [ ] ç§æœ‰æˆå“¡: `_leading_underscore`

#### âœ… æ ¼å¼è¦ç¯„
- [ ] ç¸®æ’: 4 ç©ºæ ¼ï¼ˆä¸ä½¿ç”¨ Tabï¼‰
- [ ] è¡Œé•·åº¦: â‰¤ 79 å­—ç¬¦ï¼ˆdocstring/è¨»é‡‹ â‰¤ 72ï¼‰
- [ ] ç©ºç™½è¡Œ: é ‚å±¤å‡½æ•¸/é¡é–“ 2 è¡Œï¼Œæ–¹æ³•é–“ 1 è¡Œ
- [ ] Import: æ¨™æº–åº« â†’ ç¬¬ä¸‰æ–¹ â†’ æœ¬åœ°æ¨¡çµ„

#### âœ… ä»£ç¢¼é¢¨æ ¼
- [ ] é‹ç®—ç¬¦å‘¨åœæœ‰ç©ºæ ¼: `a + b`
- [ ] é€—è™Ÿå¾Œæœ‰ç©ºæ ¼: `[1, 2, 3]`
- [ ] å†’è™Ÿå¾Œæœ‰ç©ºæ ¼ï¼ˆå­—å…¸ï¼‰: `{'key': 'value'}`
- [ ] è¨»é‡‹èˆ‡ä»£ç¢¼é–“éš” 2 ç©ºæ ¼: `x = 1  # comment`

---

## æŠ€è¡“å‚µå‹™æ¸…å–®

### ğŸ”´ Critical (å¿…é ˆä¿®å¾©)

1. **æ‹†åˆ† menu.py**
   - å„ªå…ˆç´š: æœ€é«˜
   - é ä¼°å·¥ä½œé‡: 3-5 å¤©
   - å½±éŸ¿: å¯ç¶­è­·æ€§ã€å¯æ¸¬è©¦æ€§

2. **æ·»åŠ éŒ¯èª¤è™•ç†**
   - å„ªå…ˆç´š: æœ€é«˜
   - é ä¼°å·¥ä½œé‡: 2-3 å¤©
   - å½±éŸ¿: ç©©å®šæ€§ã€ç”¨æˆ¶é«”é©—

3. **ä¿®å¾© PEP 8 é•è¦**
   - å„ªå…ˆç´š: é«˜
   - é ä¼°å·¥ä½œé‡: 1-2 å¤©
   - å½±éŸ¿: ä»£ç¢¼è³ªé‡ã€åœ˜éšŠå”ä½œ

---

### ğŸŸ¡ Medium (æ‡‰è©²ä¿®å¾©)

4. **æå–å¸¸é‡**
   - å„ªå…ˆç´š: ä¸­
   - é ä¼°å·¥ä½œé‡: 1 å¤©
   - å½±éŸ¿: å¯ç¶­è­·æ€§

5. **æ·»åŠ é¡å‹æç¤º**
   - å„ªå…ˆç´š: ä¸­
   - é ä¼°å·¥ä½œé‡: 2-3 å¤©
   - å½±éŸ¿: ä»£ç¢¼å¯è®€æ€§ã€IDE æ”¯æŒ

6. **çµ±ä¸€è¡“èª**
   - å„ªå…ˆç´š: ä¸­
   - é ä¼°å·¥ä½œé‡: 1 å¤©
   - å½±éŸ¿: ä»£ç¢¼å¯è®€æ€§

7. **æ”¹å–„ XPath å®šä½**
   - å„ªå…ˆç´š: ä¸­
   - é ä¼°å·¥ä½œé‡: 1-2 å¤©
   - å½±éŸ¿: ç©©å®šæ€§ï¼ˆé é¢è®ŠåŒ–æ™‚ï¼‰

---

### ğŸŸ¢ Low (å¯ä»¥ä¿®å¾©)

8. **æ·»åŠ å–®å…ƒæ¸¬è©¦**
   - å„ªå…ˆç´š: ä½ï¼ˆä½†é‡è¦ï¼‰
   - é ä¼°å·¥ä½œé‡: 3-5 å¤©
   - å½±éŸ¿: å¯ç¶­è­·æ€§ã€é‡æ§‹ä¿¡å¿ƒ

9. **æ€§èƒ½å„ªåŒ–ï¼ˆä¸¦è¡Œæƒæï¼‰**
   - å„ªå…ˆç´š: ä½
   - é ä¼°å·¥ä½œé‡: 2-3 å¤©
   - å½±éŸ¿: åŸ·è¡Œæ•ˆç‡

10. **æ—¥èªŒç³»çµ±**
    - å„ªå…ˆç´š: ä½
    - é ä¼°å·¥ä½œé‡: 1 å¤©
    - å½±éŸ¿: èª¿è©¦ä¾¿åˆ©æ€§

---

## ç¸½çµèˆ‡å»ºè­°

### ç«‹å³è¡Œå‹•é …

1. **ä½¿ç”¨è‡ªå‹•åŒ–å·¥å…·ä¿®å¾© PEP 8** (1 å¤©)
   ```bash
   black src/ menu.py --line-length 79
   flake8 src/ menu.py --max-line-length 79
   isort src/ menu.py
   ```

2. **å‰µå»º src/constants.py** (åŠå¤©)
   - æå–æ‰€æœ‰é­”è¡“æ•¸å­—å’Œç¡¬ç·¨ç¢¼å­—ç¬¦ä¸²

3. **å‰µå»º src/exceptions.py** (åŠå¤©)
   - å®šç¾©è‡ªå®šç¾©ç•°å¸¸é¡

### çŸ­æœŸç›®æ¨™ (1-2 é€±)

1. **é‡æ§‹ menu.py** (3-5 å¤©)
   - æå– APIScanner
   - æå– WebScanner
   - æå– DurationSender
   - æå– DurationVerifier

2. **æ·»åŠ é¡å‹æç¤º** (2-3 å¤©)
   - å¾æ ¸å¿ƒæ¨¡çµ„é–‹å§‹
   - é€æ­¥è¦†è“‹æ‰€æœ‰å…¬å…± API

3. **æ”¹å–„éŒ¯èª¤è™•ç†** (2-3 å¤©)
   - ä½¿ç”¨è‡ªå®šç¾©ç•°å¸¸
   - æ·»åŠ éŒ¯èª¤æ¢å¾©æ©Ÿåˆ¶

### ä¸­æœŸç›®æ¨™ (1 å€‹æœˆ)

1. **æ·»åŠ å–®å…ƒæ¸¬è©¦** (3-5 å¤©)
   - æ¸¬è©¦è¦†è“‹ç‡é”åˆ° 60%+
   - è‡³å°‘è¦†è“‹æ ¸å¿ƒé‚è¼¯

2. **æ–‡æª”å®Œå–„** (2-3 å¤©)
   - API æ–‡æª”
   - ä½¿ç”¨èªªæ˜
   - æ¶æ§‹åœ–

3. **CI/CD è¨­ç½®** (1-2 å¤©)
   - GitHub Actions
   - è‡ªå‹•æ¸¬è©¦
   - ä»£ç¢¼è³ªé‡æª¢æŸ¥

### é•·æœŸç›®æ¨™ (2-3 å€‹æœˆ)

1. **æ¶æ§‹é‡æ§‹**
   - å¯¦ç¾å®Œæ•´çš„åˆ†å±¤æ¶æ§‹
   - è§£è€¦å„å€‹æ¨¡çµ„

2. **æ€§èƒ½å„ªåŒ–**
   - ä¸¦è¡Œæƒæ
   - ç·©å­˜æ©Ÿåˆ¶

3. **åŠŸèƒ½æ“´å±•**
   - GUI ç•Œé¢
   - é…ç½®ç†±é‡è¼‰
   - æ’ä»¶ç³»çµ±

---

## é™„éŒ„

### A. æ–‡ä»¶æ¸…å–®

#### æ ¸å¿ƒä»£ç¢¼ (éœ€è¦é‡æ§‹)
- `menu.py` (2700+ è¡Œ) - **é‡æ§‹å„ªå…ˆç´š: æœ€é«˜**
- `src/pages/course_detail_page.py` - å„ªåŒ– XPath
- `src/api/interceptors/` - çµ±ä¸€æ¥å£

#### æ¸¬è©¦è…³æœ¬ (éœ€è¦æ•´ç†)
- `analyze_*.py` (15+ å€‹æ–‡ä»¶) - ç§»åˆ° scripts/analysis/
- `test_*.py` (6+ å€‹æ–‡ä»¶) - ç§»åˆ° tests/

#### é…ç½®æ–‡ä»¶
- `config/eebot.cfg` - æ·»åŠ é©—è­‰

---

### B. åƒè€ƒè³‡æº

#### PEP æ–‡æª”
- [PEP 8 - Style Guide](https://peps.python.org/pep-0008/)
- [PEP 257 - Docstring Conventions](https://peps.python.org/pep-0257/)
- [PEP 484 - Type Hints](https://peps.python.org/pep-0484/)

#### å·¥å…·æ–‡æª”
- [Black - Code Formatter](https://black.readthedocs.io/)
- [Flake8 - Linter](https://flake8.pycqa.org/)
- [MyPy - Type Checker](https://mypy.readthedocs.io/)
- [Pytest - Testing Framework](https://docs.pytest.org/)

#### è¨­è¨ˆæ¨¡å¼
- [Page Object Model](https://www.selenium.dev/documentation/test_practices/encouraged/page_object_models/)
- [Clean Architecture](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)

---

**å ±å‘ŠçµæŸ**

æœ¬å ±å‘Šè©³ç´°åˆ†æäº† EEBot å°ˆæ¡ˆçš„æ¶æ§‹ã€ä»£ç¢¼è³ªé‡ã€ä»¥åŠæ”¹é€²æ©Ÿæœƒã€‚
å»ºè­°æŒ‰ç…§å„ªå…ˆç´šé€æ­¥å¯¦æ–½é‡æ§‹ï¼Œå¾æœ€é—œéµçš„å•é¡Œï¼ˆmenu.py æ‹†åˆ†ã€éŒ¯èª¤è™•ç†ã€PEP 8ï¼‰é–‹å§‹ã€‚

**ä¸‹ä¸€æ­¥**: é–‹å§‹å¯¦æ–½çŸ­æœŸç›®æ¨™ï¼Œä¸¦å®šæœŸè¿½è¹¤é€²åº¦ã€‚
